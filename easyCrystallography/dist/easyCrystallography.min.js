/*!
 * Copyright (c) 2012 - 2022, Anaconda, Inc., and Bokeh Contributors
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 * 
 * Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 * 
 * Neither the name of Anaconda nor the names of any contributors
 * may be used to endorse or promote products derived from this software
 * without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 * THE POSSIBILITY OF SUCH DAMAGE.
 */
(function(root, factory) {
  factory(root["Bokeh"], undefined);
})(this, function(Bokeh, version) {
  let define;
  return (function(modules, entry, aliases, externals) {
    const bokeh = typeof Bokeh !== "undefined" && (version != null ? Bokeh[version] : Bokeh);
    if (bokeh != null) {
      return bokeh.register_plugin(modules, entry, aliases);
    } else {
      throw new Error("Cannot find Bokeh " + version + ". You have to load it prior to loading plugins.");
    }
  })
({
"f492373223": function _(s,t,e,o,r){o();const a=(0,s("tslib").__importStar)(s("153c19733b"));e.easyCrystallographyExtensions=a;(0,s("@bokehjs/base").register_models)(a)},
"153c19733b": function _(e,f,i,n,r){n(),r("NGLViewer",e("584f8ea9f3").NGLViewer)},
"584f8ea9f3": function _(e,t,s,o,i){o();const n=e("@bokehjs/models/layouts/html_box");class r extends n.HTMLBoxView{connect_signals(){super.connect_signals(),this.connect(this.model.properties.object.change,this.updateStage),this.connect(this.model.properties.extension.change,this.updateStage),this.connect(this.model.properties.representation.change,this.updateStage),this.connect(this.model.properties.color_scheme.change,this.updateParameters),this.connect(this.model.properties.custom_color_scheme.change,this.updateParameters),this.connect(this.model.properties.effect.change,this.updateEffect),this.connect(this.model.properties.background.change,this.setBackgroundcolor)}render(){super.render(),this.el.id="viewport";const e=window.NGL;this._stage=new e.Stage(this.el),this.setBackgroundcolor();const t=this._stage;this.updateStage(),window.addEventListener("resize",(function(){t.handleResize()}),!1)}setBackgroundcolor(){console.log(this.model.background),this._stage.setParameters({backgroundColor:this.model.background})}after_layout(){super.after_layout(),this._stage.handleResize()}updateEffect(){"spin"===this.model.effect?this._stage.setSpin(!0):"rock"===this.model.effect?this._stage.setRock(!0):(this._stage.setSpin(!1),this._stage.setRock(!1))}getParameters(){if("custom"===this.model.color_scheme){var e=this.model.custom_color_scheme;return{color:NGL.ColormakerRegistry.addSelectionScheme(e,"new scheme")}}return{colorScheme:this.model.color_scheme}}updateParameters(){const e=this.getParameters();try{this._stage.compList[0].reprList[0].setParameters(e)}catch(e){console.log(e)}}updateStage(){const e=this.model;if(this._stage.removeAllComponents(),""===e.object)return;const t=this.getParameters();function s(s){s.addRepresentation(e.representation,t),s.autoView()}""!==e.extension?this._stage.loadFile(new Blob([e.object],{type:"text/plain"}),{ext:e.extension}).then(s):e.object.includes("://")?this._stage.loadFile(e.object).then(s):this._stage.loadFile("rcsb://"+e.object).then(s),this.updateEffect()}}s.NGLViewerView=r,r.__name__="NGLViewerView";class c extends n.HTMLBox{constructor(e){super(e)}static init_NGLViewer(){this.prototype.default_view=r,this.define((({String:e,Any:t})=>({object:[e,"<button style='width:100%'>Click Me</button>"],extension:[e,"cif"],representation:[e,"ribbon"],color_scheme:[e,"chainid"],custom_color_scheme:[t,"chainid"],effect:[e,""]}))),this.override({height:400,width:600})}}s.NGLViewer=c,c.__name__="NGLViewer",c.__module__="easyCrystallography.graphics.bokeh_extensions.ngl_viewer",c.init_NGLViewer()},
}, "f492373223", {"index":"f492373223","graphics/bokeh_extensions/index":"153c19733b","graphics/bokeh_extensions/ngl_viewer":"584f8ea9f3"}, {});});
